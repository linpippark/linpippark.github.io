<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åº·è»’(äº”ä¸Š)è‡ªç„¶ç·šä¸ŠæœŸæœ«æ¸¬é©—ç³»çµ±_å–®å…ƒ3ï¼šç©ºæ°£çš„çµ„æˆèˆ‡åæ‡‰ã€å–®å…ƒ4ï¼šç¥ç§˜çš„å¤©ç©º</title>
    <style>
        body { font-family: "Microsoft JhengHei", Arial, sans-serif; background-color: #f0f2f5; margin: 0; padding: 20px; color: #1c1e21; }
        .container { max-width: 950px; margin: 0 auto; background: #fff; padding: 40px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #1877f2; border-bottom: 4px solid #fbc531; padding-bottom: 20px; font-size: 1.8em; letter-spacing: 1px; }
        .sub-title { font-size: 0.6em; color: #606770; display: block; margin-top: 8px; font-weight: normal; }
        
        /* Timer Styles */
        .timer-box { position: fixed; top: 15px; right: 20px; background: #2f3640; color: #fbc531; padding: 12px 25px; border-radius: 50px; font-size: 1.4em; font-weight: bold; z-index: 1000; box-shadow: 0 4px 10px rgba(0,0,0,0.2); border: 3px solid #fff; transition: all 0.3s; }
        .timer-warning { background-color: #c0392b; color: #fff; animation: blink 1s infinite; border-color: #e74c3c; }
        @keyframes blink { 50% { opacity: 0.8; } }

        /* Question Styles */
        .section-header { background: #e1f5fe; color: #0277bd; padding: 15px; border-left: 6px solid #0288d1; margin: 40px 0 20px 0; font-weight: bold; font-size: 1.25em; border-radius: 4px; }
        .question-block { margin-bottom: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background-color: #fff; transition: 0.2s; position: relative; }
        .question-block:hover { background-color: #fafafa; border-color: #bbb; }
        .question-text { font-weight: bold; font-size: 1.05em; margin-bottom: 12px; display: block; line-height: 1.5; }
        
        /* Tags for Units */
        .tag { display: inline-block; padding: 3px 8px; font-size: 0.75em; border-radius: 4px; margin-right: 8px; color: #fff; vertical-align: text-bottom; }
        .tag-u3 { background-color: #e67e22; } /* Unit 3: Air */
        .tag-u4 { background-color: #8e44ad; } /* Unit 4: Sky */

        .options label { display: block; margin: 8px 0; cursor: pointer; padding: 8px 12px; border-radius: 6px; transition: background 0.2s; border: 1px solid transparent; }
        .options label:hover { background-color: #f1f2f6; border-color: #dcdde1; }
        .options input { margin-right: 10px; transform: scale(1.2); }

        /* Review Flag */
        .flag-review { margin-top: 10px; font-size: 0.9em; color: #e58e26; display: inline-flex; align-items: center; cursor: pointer; font-weight: bold; }
        .flag-review input { margin-right: 5px; }
        .marked { border: 2px solid #fbc531 !important; background-color: #fffbf0 !important; }
        .marked::after { content: "â˜… å¾…æª¢æŸ¥"; position: absolute; top: 10px; right: 10px; color: #fbc531; font-weight: bold; }

        /* Buttons */
        .btn-group { text-align: center; margin-top: 50px; padding-top: 20px; border-top: 2px dashed #ccc; }
        button { padding: 15px 40px; font-size: 1.1em; cursor: pointer; border: none; border-radius: 50px; margin: 0 15px; font-weight: bold; box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: transform 0.2s; }
        .btn-submit { background-color: #44bd32; color: white; }
        .btn-submit:hover { background-color: #4cd137; transform: translateY(-3px); }
        .btn-answer { background-color: #2f3640; color: white; }
        .btn-answer:hover { background-color: #353b48; transform: translateY(-3px); }

        /* Result & Explanation */
        .result-area { text-align: center; font-size: 2em; color: #e74c3c; margin-bottom: 30px; display: none; font-weight: bold; padding: 20px; background: #fadbd8; border-radius: 10px; border: 2px solid #e74c3c; }
        .correct-answer { color: #c0392b; font-weight: bold; margin-left: 10px; display: none; background: #fce4ec; padding: 2px 8px; border-radius: 4px; }
        .explanation { font-size: 0.9em; color: #555; display: none; margin-top: 10px; background: #eceff1; padding: 15px; border-radius: 5px; line-height: 1.6; border-left: 4px solid #607d8b; }

        /* Modal */
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); backdrop-filter: blur(4px); }
        .modal-content { background-color: white; margin: 15% auto; padding: 30px; border-radius: 12px; width: 320px; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.3); }
        .modal input { padding: 12px; width: 80%; margin: 15px 0; border: 2px solid #dfe6e9; border-radius: 8px; text-align: center; font-size: 1.2em; outline: none; }
        .modal input:focus { border-color: #74b9ff; }
    </style>
</head>
<body>

    <div id="timerDisplay" class="timer-box">15:00</div>

    <div class="container">
        <h1>åº·è»’(äº”ä¸Š)è‡ªç„¶ç·šä¸ŠæœŸæœ«æ¸¬é©—ç³»çµ±<br><span class="sub-title">å–®å…ƒ3ï¼šç©ºæ°£çš„çµ„æˆèˆ‡åæ‡‰ã€å–®å…ƒ4ï¼šç¥ç§˜çš„å¤©ç©º</span></h1>
        
        <div id="resultArea" class="result-area"></div>

        <form id="examForm">
            <div id="questions-container"></div>

            <div class="btn-group">
                <button type="button" class="btn-submit" onclick="submitExam()">äº¤å· (Submit)</button>
                <button type="button" class="btn-answer" onclick="openModal()">è¼¸å…¥å¯†ç¢¼çœ‹è©³è§£</button>
            </div>
        </form>
    </div>

    <div id="pwdModal" class="modal">
        <div class="modal-content">
            <h3>ğŸ”’ æ•™å¸«å°ˆç”¨å€</h3>
            <p>è«‹è¼¸å…¥å¯†ç¢¼ (0106)</p>
            <input type="password" id="pwdInput" placeholder="Password">
            <br>
            <button onclick="checkPwd()" style="background:#0984e3; color:white; border:none; padding:10px 20px; border-radius:5px; cursor:pointer;">ç¢ºå®š</button>
            <button onclick="document.getElementById('pwdModal').style.display='none'" style="background:#b2bec3; color:white; border:none; padding:10px 20px; border-radius:5px; cursor:pointer;">å–æ¶ˆ</button>
        </div>
    </div>

    <script>
        // --- é¡Œç›®è³‡æ–™åº« (50é¡Œ) ---
        const questions = [
            // --- ä¸€ã€æ˜¯éé¡Œ (20é¡Œï¼Œæ¯é¡Œ1åˆ†) ---
            {id: 1, u:3, type: 'tf', text: 'åªè¦æœ‰å¯ç‡ƒç‰©å’ŒåŠ©ç‡ƒç‰©é€™å…©å€‹æ¢ä»¶ï¼Œç‰©é«”å°±æœƒç‡ƒç‡’ã€‚', ans: 'X', exp: 'é‚„éœ€è¦é”åˆ°ç‡ƒé»(æº«åº¦)ï¼Œä¸‰è€…ç¼ºä¸€ä¸å¯ã€‚'},
            {id: 2, u:4, type: 'tf', text: 'åœ°çƒè‡ªè½‰çš„æ–¹å‘æ˜¯ç”±è¥¿å‘æ±ï¼Œæ‰€ä»¥æˆ‘å€‘çœ‹åˆ°çš„æ˜Ÿæ˜Ÿå’Œå¤ªé™½éƒ½æ˜¯ç”±æ±å‘è¥¿ç§»å‹•ã€‚', ans: 'O', exp: 'æ­£ç¢ºï¼Œé€™æ˜¯ç›¸å°é‹å‹•çš„æ¦‚å¿µã€‚'},
            {id: 3, u:3, type: 'tf', text: 'å°‡é‹¼æ£‰çƒæ”¾å…¥è£æœ‰é†‹é…¸çš„å»£å£ç“¶ä¸­ï¼Œç”Ÿé½é€Ÿåº¦æœƒæ¯”æ”¾å…¥æ¸…æ°´çš„ç“¶å­å¿«ã€‚', ans: 'O', exp: 'æ­£ç¢ºï¼Œé…¸æ€§æº¶æ¶²æœƒåŠ é€Ÿæ°§åŒ–ç”Ÿé½åæ‡‰ã€‚'},
            {id: 4, u:4, type: 'tf', text: 'ä¸€å¹´å››å­£ä¸­ï¼Œå¤ªé™½éƒ½æ˜¯å¾æ­£æ±æ–¹å‡èµ·ï¼Œæ­£è¥¿æ–¹è½ä¸‹ã€‚', ans: 'X', exp: 'åªæœ‰æ˜¥åˆ†ã€ç§‹åˆ†æ˜¯æ­£æ±å‡èµ·ã€‚å¤è‡³æ±åŒ—å‡ï¼Œå†¬è‡³æ±å—å‡ã€‚'},
            {id: 5, u:3, type: 'tf', text: 'æ°§æ°£å¯ä»¥ä½¿å¸¶æœ‰é¤˜ç‡¼çš„ç·šé¦™å¾©ç‡ƒï¼Œé€™è­‰æ˜æ°§æ°£å…·æœ‰å¯ç‡ƒæ€§ã€‚', ans: 'X', exp: 'é€™è­‰æ˜æ°§æ°£æœ‰ã€ŒåŠ©ç‡ƒæ€§ã€ï¼Œæ°§æ°£æœ¬èº«ä¸å¯ç‡ƒã€‚'},
            {id: 6, u:4, type: 'tf', text: 'å¤ªé™½ç³»ä¸­ï¼Œæœˆçƒæ˜¯è¡›æ˜Ÿï¼Œåœ°çƒæ˜¯è¡Œæ˜Ÿï¼Œå¤ªé™½æ˜¯æ†æ˜Ÿã€‚', ans: 'O', exp: 'æ­£ç¢ºï¼Œé€™ä¸‰è€…çš„åˆ†é¡è¦è¨˜ç†Ÿã€‚'},
            {id: 7, u:3, type: 'tf', text: 'éµè£½å“ç”Ÿé½å¾Œï¼Œé‡é‡æœƒè®Šè¼•ã€‚', ans: 'X', exp: 'éµç”Ÿé½æ˜¯èˆ‡æ°§çµåˆ(æ°§åŒ–éµ)ï¼Œé‡é‡æœƒç¨å¾®è®Šé‡(è‹¥æœªå‰è½)ã€‚'},
            {id: 8, u:4, type: 'tf', text: 'åˆ©ç”¨åŒ—æ–—ä¸ƒæ˜Ÿå°‹æ‰¾åŒ—æ¥µæ˜Ÿæ™‚ï¼Œè¦åˆ©ç”¨æ“å£å…©é¡†æ˜Ÿé€£ç·šå»¶é•·ç´„5å€è·é›¢ã€‚', ans: 'O', exp: 'æ­£ç¢ºã€‚'},
            {id: 9, u:3, type: 'tf', text: 'é›™æ°§æ°´åŠ å…¥ç´…è˜¿è””ä¸ç”¢ç”Ÿæ°£æ³¡ï¼Œæ˜¯å› ç‚ºç´…è˜¿è””ä¸æº¶è§£è®Šæˆäº†æ°£é«”ã€‚', ans: 'X', exp: 'æ°£æ³¡æ˜¯é›™æ°§æ°´åˆ†è§£ç”¢ç”Ÿçš„æ°§æ°£ï¼Œç´…è˜¿è””æ˜¯å‚¬åŒ–åŠ‘ï¼Œæœ¬èº«ä¸æœƒæ¸›å°‘æˆ–è®Šæˆæ°£é«”ã€‚'},
            {id: 10, u:4, type: 'tf', text: 'å¤å­£ä¸­åˆçš„å¤ªé™½é«˜åº¦è§’æœ€å¤§ï¼Œæ‰€ä»¥å½±å­æœ€é•·ã€‚', ans: 'X', exp: 'é«˜åº¦è§’è¶Šå¤§ï¼Œå½±å­è¶ŠçŸ­ã€‚'},
            {id: 11, u:3, type: 'tf', text: 'äºŒæ°§åŒ–ç¢³æ¯”ç©ºæ°£é‡ï¼Œä¸”å…·æœ‰ä¸å¯ç‡ƒä¹Ÿä¸åŠ©ç‡ƒçš„ç‰¹æ€§ï¼Œå¸¸ç”¨æ–¼æ»…ç«ã€‚', ans: 'O', exp: 'æ­£ç¢ºï¼ŒäºŒæ°§åŒ–ç¢³æ»…ç«å™¨åŸç†ã€‚'},
            {id: 12, u:4, type: 'tf', text: 'æ˜Ÿæ˜Ÿçœ‹èµ·ä¾†æœ‰äº®æœ‰æš—ï¼Œä¸»è¦æ˜¯å› ç‚ºæ˜Ÿæ˜Ÿçš„é¡è‰²ä¸åŒã€‚', ans: 'X', exp: 'äº®åº¦èˆ‡ã€Œç™¼å…‰å¼·åº¦ã€åŠã€Œè·é›¢é è¿‘ã€æœ‰é—œï¼Œéé¡è‰²ä¸»è¦æ±ºå®šã€‚'},
            {id: 13, u:3, type: 'tf', text: 'åœ¨ç‡ƒç‡’å¯¦é©—ä¸­ï¼Œå»£å£ç“¶è“‹ä¸Šç»ç’ƒç‰‡å¾Œï¼Œç‡­ç«ç†„æ»…æ°´ä½ä¸Šå‡ï¼Œä¸»è¦åŸå› æ˜¯ç“¶å…§ç©ºæ°£ç†±è„¹å†·ç¸®ã€‚', ans: 'X', exp: 'ä¸»è¦åŸå› æ˜¯æ°§æ°£è¢«æ¶ˆè€—ï¼Œæ°£å£“è®Šå°ï¼Œæ°´è¢«å¸å…¥ã€‚(é›–ç„¶ç†±è„¹å†·ç¸®æœ‰å¾®å°å½±éŸ¿ï¼Œä½†ä¸»å› æ˜¯æ°£é«”æ¶ˆè€—)ã€‚'},
            {id: 14, u:4, type: 'tf', text: 'æ˜Ÿåº§ç›¤ä¸Šçš„æ©¢åœ“å½¢çª—å£ä»£è¡¨åœ°å¹³ç·šï¼Œçª—å£ä»¥å¤–çš„æ˜Ÿæ˜Ÿåœ¨åœ°å¹³ç·šä¸‹çœ‹ä¸åˆ°ã€‚', ans: 'O', exp: 'æ­£ç¢ºã€‚'},
            {id: 15, u:3, type: 'tf', text: 'é£Ÿå“åŒ…è£ä¸­å……å¡«æ°®æ°£ï¼Œæ˜¯å› ç‚ºæ°®æ°£å¯ä»¥æ®ºæ­»ç´°èŒã€‚', ans: 'X', exp: 'æ°®æ°£æ˜¯ç‚ºäº†éš”çµ•æ°§æ°£(é˜²æ°§åŒ–/é˜²è…)å’Œé˜²å£“ï¼Œä¸¦éæ®ºèŒã€‚'},
            {id: 16, u:4, type: 'tf', text: 'åŒ—æ¥µæ˜Ÿåœ¨å¤©ç©ºä¸­çš„ä½ç½®å¹¾ä¹å›ºå®šä¸è®Šï¼Œæ˜¯å› ç‚ºå®ƒæ­£å¥½åœ¨åœ°è»¸åŒ—æ¥µçš„å»¶é•·ç·šä¸Šã€‚', ans: 'O', exp: 'æ­£ç¢ºã€‚'},
            {id: 17, u:3, type: 'tf', text: 'ç‚ºäº†é˜²æ­¢éµé–€ç”Ÿé½ï¼Œæˆ‘å€‘å¯ä»¥å®šæœŸåˆ·ä¸Šæ²¹æ¼†ã€‚', ans: 'O', exp: 'æ­£ç¢ºï¼Œéš”çµ•ç©ºæ°£èˆ‡æ°´ã€‚'},
            {id: 18, u:4, type: 'tf', text: 'ç«æ˜Ÿè¡¨é¢çœ‹èµ·ä¾†ç´…ç´…çš„ï¼Œæ˜¯å› ç‚ºä¸Šé¢æœ‰ç«åœ¨ç‡ƒç‡’ã€‚', ans: 'X', exp: 'æ˜¯å› ç‚ºåœ°è¡¨å²©çŸ³å«æœ‰å¤§é‡æ°§åŒ–éµ(ç”Ÿé½çš„éµ)ï¼Œå‘ˆç¾ç´…è¤è‰²ã€‚'},
            {id: 19, u:3, type: 'tf', text: 'å°‡é»ç‡ƒçš„ç·šé¦™æ”¾å…¥å……æ»¿äºŒæ°§åŒ–ç¢³çš„ç“¶ä¸­ï¼Œç·šé¦™æœƒç‡ƒç‡’å¾—æ›´æ—ºç››ã€‚', ans: 'X', exp: 'æœƒç«‹åˆ»ç†„æ»…ï¼ŒäºŒæ°§åŒ–ç¢³ä¸åŠ©ç‡ƒã€‚'},
            {id: 20, u:4, type: 'tf', text: 'å¦‚æœä½ åœ¨æ™šä¸Š8é»çœ‹åˆ°æ˜Ÿæ˜Ÿåœ¨æ±æ–¹ï¼Œåˆ°äº†æ™šä¸Š10é»ï¼Œå®ƒæœƒç§»å‹•åˆ°è¥¿æ–¹è½ä¸‹ã€‚', ans: 'X', exp: '2å°æ™‚åªæœƒç§»å‹•ç´„30åº¦(å¾€ä¸Šæˆ–å¾€è¥¿å)ï¼Œä¸æœƒç›´æ¥åˆ°è¥¿æ–¹è½ä¸‹(éœ€è¦ç´„12å°æ™‚)ã€‚'},

            // --- äºŒã€é¸æ“‡é¡Œ (20é¡Œï¼Œæ¯é¡Œ2åˆ†) ---
            {id: 21, u:3, type: 'mc', text: 'ä¸‹åˆ—å“ªä¸€ç¨®æ°£é«”ç´„ä½”ç©ºæ°£é«”ç©çš„äº”åˆ†ä¹‹ä¸€ï¼Œä¸”å…·æœ‰åŠ©ç‡ƒæ€§ï¼Ÿ', opts: ['1. æ°®æ°£', '2. æ°§æ°£', '3. äºŒæ°§åŒ–ç¢³', '4. æ°¬æ°£'], ans: '2', exp: 'æ°§æ°£ä½”ç´„21% (1/5)ã€‚'},
            {id: 22, u:4, type: 'mc', text: 'åœ¨è‡ºç£ï¼Œå¤è‡³é€™ä¸€å¤©(6/22å·¦å³)ï¼Œå¤ªé™½å‡èµ·çš„æ–¹ä½æ˜¯ï¼Ÿ', opts: ['1. æ­£æ±æ–¹', '2. æ±ååŒ—', '3. æ±åå—', '4. æ­£å—æ–¹'], ans: '2', exp: 'å¤è‡³æ—¥å‡ºæ±åŒ—ï¼Œæ—¥è½è¥¿åŒ—ã€‚'},
            {id: 23, u:3, type: 'mc', text: 'æƒ³è¦æª¢é©—æ±½æ°´ä¸­å†’å‡ºçš„æ°£æ³¡æ˜¯ä¸æ˜¯äºŒæ°§åŒ–ç¢³ï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯é€šå…¥ä»€éº¼æ¶²é«”ï¼Ÿ', opts: ['1. é›™æ°§æ°´', '2. é†‹é…¸', '3. æ¾„æ¸…çŸ³ç°æ°´', '4. ç¢˜æ¶²'], ans: '3', exp: 'äºŒæ°§åŒ–ç¢³ä½¿æ¾„æ¸…çŸ³ç°æ°´è®Šæ··æ¿(ç”¢ç”Ÿç¢³é…¸éˆ£)ã€‚'},
            {id: 24, u:4, type: 'mc', text: 'ä½¿ç”¨æ˜Ÿåº§ç›¤æ™‚ï¼Œå¦‚æœç¾åœ¨æ˜¯æ™šä¸Šï¼Œè¦å°‡æ˜Ÿåº§ç›¤ç›¤é¢å¦‚ä½•æ”¾ç½®ï¼Ÿ', opts: ['1. ç›¤é¢æœä¸‹', '2. ç›¤é¢ç›´ç«‹', '3. ç›¤é¢æœä¸Šï¼Œç›¤ä¸Šæ–¹ä½å°æº–å¯¦éš›æ–¹ä½', '4. éš¨æ„æ”¾ç½®'], ans: '3', exp: 'ç›¤é¢æœä¸Š(æ¨¡æ“¬ä»°æœ›å¤©ç©º)ï¼Œä¸”åŒ—å°åŒ—ã€å—å°å—ã€‚'},
            {id: 25, u:3, type: 'mc', text: 'é…’ç²¾ç‡ˆå¦‚æœä¸å°å¿ƒæ‰“ç¿»èµ·ç«ï¼Œæ‡‰è©²ç”¨ä»€éº¼æ–¹æ³•æ»…ç«æœ€å®‰å…¨æœ‰æ•ˆï¼Ÿ', opts: ['1. ç”¨å˜´å¹ç†„', '2. æ½‘æ°´', '3. ç”¨æ¿•æŠ¹å¸ƒè¦†è“‹', '4. å¤§è²å°–å«'], ans: '3', exp: 'æ¿•æŠ¹å¸ƒè¦†è“‹å¯éš”çµ•æ°§æ°£ä¸¦é™æº«ã€‚'},
            {id: 26, u:4, type: 'mc', text: 'ä¸‹åˆ—å“ªä¸€å€‹æ˜Ÿåº§æ˜¯ã€Œå†¬å­£ã€çš„ä»£è¡¨æ˜Ÿåº§ï¼Œè…°å¸¶æœ‰ä¸‰é¡†äº®æ˜Ÿï¼Ÿ', opts: ['1. çµæˆ¶åº§', '2. ç…å­åº§', '3. å¤©è åº§', '4. é£›é¦¬åº§'], ans: '1', exp: 'çµæˆ¶åº§æ˜¯å†¬å­£æ˜Ÿç©ºä¹‹ç‹ã€‚'},
            {id: 27, u:3, type: 'mc', text: 'å°è˜‡æ‰“ç²‰åŠ å…¥é†‹ï¼Œæœƒç”¢ç”Ÿå¤§é‡çš„æ°£æ³¡ï¼Œé€™å€‹æ°£æ³¡çš„æˆåˆ†å’Œä¸‹åˆ—ä½•è€…ç›¸åŒï¼Ÿ', opts: ['1. é›™æ°§æ°´åˆ†è§£ç”¢ç”Ÿçš„æ°£é«”', '2. äººé¡å‘¼å¸æ™‚å¸å…¥çš„ä¸»è¦æ°£é«”', '3. è Ÿç‡­ç‡ƒç‡’ç”¢ç”Ÿçš„æ°£é«”', '4. å¡«å……æ°£çƒè®“å®ƒé£„æµ®çš„æ°£é«”'], ans: '3', exp: 'å°è˜‡æ‰“+é†‹=äºŒæ°§åŒ–ç¢³ï¼›è Ÿç‡­ç‡ƒç‡’=äºŒæ°§åŒ–ç¢³ã€‚é›™æ°§æ°´ç”¢ç”Ÿæ°§æ°£ã€‚'},
            {id: 28, u:4, type: 'mc', text: 'é—œæ–¼ã€Œå¤ªé™½ç³»ã€æˆå“¡çš„æ•˜è¿°ï¼Œä¸‹åˆ—ä½•è€…æ­£ç¢ºï¼Ÿ', opts: ['1. æ°´æ˜Ÿè·é›¢å¤ªé™½æœ€é ', '2. æœ¨æ˜Ÿæœ‰æ˜é¡¯çš„å…‰ç’°', '3. åœŸæ˜Ÿæ˜¯é«”ç©æœ€å¤§çš„è¡Œæ˜Ÿ', '4. é‡‘æ˜Ÿæ˜¯å¤œç©ºä¸­æœ€äº®çš„è¡Œæ˜Ÿ'], ans: '4', exp: 'é‡‘æ˜Ÿ(é•·åºš/å•Ÿæ˜)éå¸¸äº®ã€‚æœ¨æ˜Ÿæœ€å¤§ï¼ŒåœŸæ˜Ÿç’°æœ€æ˜é¡¯ï¼Œæ°´æ˜Ÿæœ€è¿‘ã€‚'},
            {id: 29, u:3, type: 'mc', text: 'æ£®æ—å¤§ç«æ™‚ï¼Œæ¶ˆé˜²å“¡é–‹é—¢é˜²ç«å··ï¼Œä¸»è¦çš„æ»…ç«åŸç†æ˜¯ï¼Ÿ', opts: ['1. é™ä½æº«åº¦', '2. éš”çµ•ç©ºæ°£', '3. ç§»é™¤å¯ç‡ƒç‰©', '4. å¢åŠ æ¿•åº¦'], ans: '3', exp: 'ç§»é™¤æ¨¹æœ¨(ç‡ƒæ–™)é˜»æ–·ç«å‹¢è”“å»¶ã€‚'},
            {id: 30, u:4, type: 'mc', text: 'å¦‚æœç¾åœ¨æ˜¯æ™šä¸Š8é»ï¼Œä»™ååº§åœ¨åŒ—æ–¹å¤©ç©ºå‘ˆç¾ã€ŒMã€å­—å½¢ï¼Œä»£è¡¨ç¾åœ¨æ‡‰è©²æ˜¯å“ªå€‹å­£ç¯€ï¼Ÿ', opts: ['1. æ˜¥å­£æˆ–å¤å­£', '2. ç§‹å­£æˆ–å†¬å­£', '3. åªæœ‰æ˜¥å­£', '4. åªæœ‰å¤å­£'], ans: '2', exp: 'ä»™ååº§æ˜¯ç§‹å†¬å°‹æ‰¾åŒ—æ¥µæ˜Ÿçš„æŒ‡æ¨™ï¼Œç§‹å†¬æ™‚ä½æ–¼åŒ—å¤©é«˜è™•è¼ƒæ˜“è§€æ¸¬(å‘ˆMæˆ–W)ã€‚'},
            {id: 31, u:3, type: 'mc', text: 'åœ¨ã€Œæ¢è¨æ°´å°éµç”Ÿé½çš„å½±éŸ¿ã€å¯¦é©—ä¸­ï¼Œä¸‹åˆ—å“ªä¸€çµ„æ˜¯æ­£ç¢ºçš„å¯¦é©—è¨­è¨ˆï¼Ÿ', opts: ['1. Aç“¶æœ‰æ°´æœ‰ç©ºæ°£ï¼ŒBç“¶æœ‰ä¹¾ç‡¥åŠ‘æœ‰ç©ºæ°£', '2. Aç“¶æœ‰æ°´ï¼ŒBç“¶ç„¡ç©ºæ°£', '3. Aç“¶å¡—æ²¹æ¼†ï¼ŒBç“¶æ”¾ä¹¾ç‡¥åŠ‘', '4. Aç“¶æ”¾éµé‡˜ï¼ŒBç“¶æ”¾é‹é‡˜'], ans: '1', exp: 'æ“ä½œè®Šå› æ˜¯ã€Œæ°´ã€ï¼Œæ‰€ä»¥ä¸€çµ„æœ‰æ°´(A)ï¼Œä¸€çµ„ç„¡æ°´(Bä¹¾ç‡¥åŠ‘)ï¼Œå…¶ä»–æ¢ä»¶(ç©ºæ°£/éµé‡˜)è¦ä¸€æ¨£ã€‚'},
            {id: 32, u:4, type: 'mc', text: 'ç‚ºä»€éº¼æˆ‘å€‘åœ¨ä¸åŒå­£ç¯€çœ‹åˆ°çš„æ˜Ÿç©ºä¸ä¸€æ¨£ï¼Ÿ', opts: ['1. å› ç‚ºåœ°çƒè‡ªè½‰', '2. å› ç‚ºåœ°çƒç¹å¤ªé™½å…¬è½‰', '3. å› ç‚ºå¤ªé™½ç¹åœ°çƒè½‰', '4. å› ç‚ºæ˜Ÿæ˜Ÿæœƒéš¨å­£ç¯€é·å¾™'], ans: '2', exp: 'åœ°çƒå…¬è½‰å°è‡´åœ°çƒåœ¨è»Œé“ä¸åŒä½ç½®ï¼Œå¤œæ™šé¢å‘çš„å®‡å®™æ–¹å‘ä¸åŒã€‚'},
            {id: 33, u:3, type: 'mc', text: 'ä¸‹åˆ—å“ªä¸€ç¨®ç‰©è³ªã€Œä¸å±¬æ–¼ã€å¯ç‡ƒç‰©ï¼Ÿ', opts: ['1. ç´™å¼µ', '2. æœ¨ç‚­', '3. ç»ç’ƒ', '4. é…’ç²¾'], ans: '3', exp: 'ç»ç’ƒä¸å¯ç‡ƒã€‚'},
            {id: 34, u:4, type: 'mc', text: 'åœ¨è‡ºç£(åŒ—å›æ­¸ç·šä»¥åŒ—)ï¼Œå†¬è‡³ç•¶å¤©ä¸­åˆçš„å½±å­æ˜¯ä¸€å¹´ä¸­ï¼Ÿ', opts: ['1. æœ€çŸ­çš„', '2. æœ€é•·çš„', '3. ä¸ä¸€å®š', '4. æ²’æœ‰å½±å­'], ans: '2', exp: 'å†¬è‡³å¤ªé™½ä»°è§’æœ€ä½ï¼Œå½±å­æ‹‰å¾—æœ€é•·ã€‚'},
            {id: 35, u:3, type: 'mc', text: 'å°‡ç‡ƒç‡’ä¸­çš„è Ÿç‡­è“‹ä¸Šå»£å£ç“¶ï¼Œéä¸€æœƒå…’è Ÿç‡­ç†„æ»…äº†ï¼Œé€™æ˜¯å› ç‚ºï¼Ÿ', opts: ['1. ç“¶å…§çš„äºŒæ°§åŒ–ç¢³ç”¨å®Œäº†', '2. ç“¶å…§çš„æ°§æ°£æ¿ƒåº¦é™ä½ï¼Œä¸è¶³ä»¥æ”¯æŒç‡ƒç‡’', '3. ç“¶å…§çš„æ°®æ°£è®Šå¤šäº†', '4. ç“¶å­æŠŠç†±å¸å…‰äº†'], ans: '2', exp: 'ç‡ƒç‡’æ¶ˆè€—æ°§æ°£ï¼Œç•¶æ¿ƒåº¦ä½æ–¼ä¸€å®šæ¯”ä¾‹å³ç†„æ»…(ä¸¦éå®Œå…¨ç”¨å…‰)ã€‚'},
            {id: 36, u:4, type: 'mc', text: 'å¤ªé™½ç³»å…«å¤§è¡Œæ˜Ÿä¸­ï¼Œä½æ–¼åœ°çƒå’Œæœ¨æ˜Ÿä¹‹é–“çš„æ˜¯å“ªä¸€é¡†ï¼Ÿ', opts: ['1. æ°´æ˜Ÿ', '2. é‡‘æ˜Ÿ', '3. ç«æ˜Ÿ', '4. åœŸæ˜Ÿ'], ans: '3', exp: 'é †åºï¼šæ°´ã€é‡‘ã€åœ°ã€ç«ã€æœ¨...'},
            {id: 37, u:3, type: 'mc', text: 'ä¸é½é‹¼ä¸æ˜“ç”Ÿé½çš„ä¸»è¦åŸå› æ˜¯ï¼Ÿ', opts: ['1. å®ƒæ˜¯ç´”éµ', '2. å®ƒè¡¨é¢å¡—äº†å¾ˆåšçš„æ²¹æ¼†', '3. å®ƒæ˜¯åˆé‡‘ï¼Œå«æœ‰é‰»ã€é³ç­‰é‡‘å±¬', '4. å®ƒç¶“éç«ç‡’è™•ç†'], ans: '3', exp: 'ä¸é½é‹¼æ˜¯é‹¼ã€é‰»ã€é³çš„åˆé‡‘ï¼ŒæŠ—è…è•æ€§ä½³ã€‚'},
            {id: 38, u:4, type: 'mc', text: 'é—œæ–¼æ†æ˜Ÿ(å¦‚å¤ªé™½)çš„ç‰¹æ€§ï¼Œä¸‹åˆ—ä½•è€…éŒ¯èª¤ï¼Ÿ', opts: ['1. æœƒè‡ªå·±ç™¼å…‰ç™¼ç†±', '2. åœ¨å®‡å®™ä¸­çš„ä½ç½®ç›¸å°å›ºå®š', '3. è¡¨é¢æº«åº¦å¾ˆé«˜', '4. æœƒç¹è‘—è¡Œæ˜Ÿé‹è½‰'], ans: '4', exp: 'æ˜¯è¡Œæ˜Ÿç¹è‘—æ†æ˜Ÿè½‰ã€‚'},
            {id: 39, u:3, type: 'mc', text: 'ä¸‹åˆ—å“ªä¸€å€‹ç”Ÿæ´»ä¾‹å­æ‡‰ç”¨äº†ã€Œéš”çµ•ç©ºæ°£ã€ä¾†é˜²é½ï¼Ÿ', opts: ['1. åˆ€å…·ä½¿ç”¨å¾Œæ“¦ä¹¾', '2. è¿´ç´‹é‡åŒ…è£¹å¡‘è† çš®', '3. ä¿æŒç’°å¢ƒä¹¾ç‡¥', '4. æ”¾å…¥é™¤æ¿•ç®±'], ans: '2', exp: 'å¡‘è† çš®åŒ…è¦†æ˜¯ç‚ºäº†éš”çµ•ç©ºæ°£èˆ‡æ°´æ¥è§¸éµã€‚1,3,4ä¸»è¦æ˜¯é‡å°ã€Œæ°´ã€ã€‚'},
            {id: 40, u:4, type: 'mc', text: 'å¦‚æœç™¼ç¾ç«¿å½±æœå‘ã€Œè¥¿åŒ—æ–¹ã€ï¼Œä»£è¡¨å¤ªé™½ç¾åœ¨ä½æ–¼å“ªå€‹æ–¹ä½ï¼Ÿ', opts: ['1. æ±å—æ–¹', '2. è¥¿å—æ–¹', '3. æ±åŒ—æ–¹', '4. è¥¿åŒ—æ–¹'], ans: '1', exp: 'å½±å­æ–¹å‘èˆ‡å¤ªé™½å…‰æºæ–¹å‘ç›¸åã€‚å½±åœ¨è¥¿åŒ—ï¼Œæ—¥å¿…åœ¨æ±å—ã€‚'},

            // --- ä¸‰ã€å‹¾é¸é¡Œ (2é¡Œï¼Œæ¯é¡Œ5åˆ†ï¼Œå…±10åˆ†) ---
            {id: 41, u:3, type: 'check', text: 'ã€å¤šé¸ã€‘ä¸‹åˆ—å“ªäº›æ–¹æ³•å¯ä»¥å¹«åŠ©ã€Œæ»…ç«ã€ï¼Ÿ', opts: ['ç”¨æ²™åœŸè¦†è“‹ç«æº', 'æ¾†æ°´', 'æ‰“é–‹çª—æˆ¶é€šé¢¨', 'ç§»é™¤å‘¨åœçš„æ˜“ç‡ƒç‰©', 'å™´ç‘äºŒæ°§åŒ–ç¢³æ»…ç«å™¨'], ans: ['1','2','4','5'], exp: 'æ‰“é–‹çª—æˆ¶æœƒå¢åŠ æ°§æ°£ä¾›çµ¦ï¼Œåè€ŒåŠ©ç‡ƒã€‚å…¶ä»–çš†ç‚ºæ­£ç¢ºæ»…ç«æ³•ã€‚'},
            {id: 42, u:4, type: 'check', text: 'ã€å¤šé¸ã€‘é—œæ–¼å°‹æ‰¾åŒ—æ¥µæ˜Ÿï¼Œä¸‹åˆ—æ•˜è¿°å“ªäº›æ­£ç¢ºï¼Ÿ', opts: ['åŒ—æ–—ä¸ƒæ˜Ÿå±¬æ–¼å¤§ç†Šåº§', 'åˆ©ç”¨åŒ—æ–—ä¸ƒæ˜Ÿæ–—å£å…©æ˜Ÿé€£ç·šå»¶é•·5å€', 'åˆ©ç”¨ä»™ååº§Wå‹å…©å´å»¶ä¼¸äº¤å‰å¾Œï¼Œå†èˆ‡ä¸­é–“æ˜Ÿé€£ç·šå»¶é•·5å€', 'åŒ—æ¥µæ˜Ÿä½æ–¼å¤©è åº§çš„å¿ƒè‡Ÿ', 'åŒ—æ¥µæ˜Ÿæ˜¯åŒ—åŠçƒè§€æ¸¬æ˜Ÿç©ºæ—‹è½‰çš„ä¸­å¿ƒ'], ans: ['1','2','3','5'], exp: 'åŒ—æ¥µæ˜Ÿåœ¨å°ç†Šåº§å°¾å·´ï¼Œä¸æ˜¯å¤©è åº§ã€‚'},

            // --- å››ã€é…åˆé¡Œ (4é¡Œï¼Œæ¯é¡Œ2.5åˆ†ï¼Œå…±10åˆ†) ---
            {id: 43, u:4, type: 'match', text: 'æ˜¥å­£æ˜Ÿç©ºä»£è¡¨ï¼ˆç‰¹å¾µï¼šåƒé®åˆ€/å•è™Ÿï¼‰ã€‚', opts: ['A. é£›é¦¬åº§', 'B. ç…å­åº§', 'C. çµæˆ¶åº§', 'D. å¤©è åº§'], ans: '2', exp: 'æ˜¥å­£ç…å­ã€‚'},
            {id: 44, u:4, type: 'match', text: 'å¤å­£æ˜Ÿç©ºä»£è¡¨ï¼ˆç‰¹å¾µï¼šSå½¢é‰¤å­/ç´…è‰²å¿ƒè‡Ÿï¼‰ã€‚', opts: ['A. é£›é¦¬åº§', 'B. ç…å­åº§', 'C. çµæˆ¶åº§', 'D. å¤©è åº§'], ans: '4', exp: 'å¤å­£å¤©è ã€‚'},
            {id: 45, u:4, type: 'match', text: 'ç§‹å­£æ˜Ÿç©ºä»£è¡¨ï¼ˆç‰¹å¾µï¼šç§‹å­£å››é‚Šå½¢ï¼‰ã€‚', opts: ['A. é£›é¦¬åº§', 'B. ç…å­åº§', 'C. çµæˆ¶åº§', 'D. å¤©è åº§'], ans: '1', exp: 'ç§‹å­£é£›é¦¬ã€‚'},
            {id: 46, u:4, type: 'match', text: 'å†¬å­£æ˜Ÿç©ºä»£è¡¨ï¼ˆç‰¹å¾µï¼šçµäººè…°å¸¶ä¸‰é€£æ˜Ÿï¼‰ã€‚', opts: ['A. é£›é¦¬åº§', 'B. ç…å­åº§', 'C. çµæˆ¶åº§', 'D. å¤©è åº§'], ans: '3', exp: 'å†¬å­£çµæˆ¶ã€‚'},

            // --- äº”ã€ç´ é¤Šé¡Œ (2é¡Œï¼Œæ¯é¡Œ5åˆ†ï¼Œå…±10åˆ†) ---
            {id: 47, u:3, type: 'mc', text: 'ã€å¯¦é©—ç´ é¤Šã€‘å°è¯åšå¯¦é©—ï¼Œå°‡é»ç‡ƒçš„ç·šé¦™æ”¾å…¥æ”¶é›†æ»¿æ°£é«”çš„å»£å£ç“¶ä¸­ï¼Œç™¼ç¾ç·šé¦™ç«‹åˆ»ç†„æ»…ã€‚è«‹å•é€™ç“¶æ°£é«”ã€Œä¸å¯èƒ½ã€æ˜¯ä¸‹åˆ—å“ªä¸€ç¨®ï¼Ÿ', opts: ['1. äºŒæ°§åŒ–ç¢³', '2. æ°®æ°£', '3. æ°§æ°£', '4. æ°¬æ°£'], ans: '3', exp: 'æ°§æ°£æœ‰åŠ©ç‡ƒæ€§ï¼Œç·šé¦™æœƒç‡ƒç‡’æ›´æ—ºæˆ–å¾©ç‡ƒï¼Œçµ•ä¸æœƒç«‹åˆ»ç†„æ»…ã€‚å…¶ä»–æ°£é«”çš†ä¸åŠ©ç‡ƒã€‚'},
            {id: 48, u:4, type: 'mc', text: 'ã€ç”Ÿæ´»ç´ é¤Šã€‘å»ºå•†åœ¨è“‹æˆ¿å­æ™‚ï¼Œç‚ºäº†è®“æˆ¿å­å†¬æš–å¤æ¶¼ï¼ˆå†¬å¤©èƒ½ç…§é€²é™½å…‰ï¼Œå¤å¤©èƒ½æ“‹ä½é™½å…‰ï¼‰ï¼Œåœ¨è‡ºç£åº§åŒ—æœå—çš„æˆ¿å­ï¼Œé®é›¨æ£šçš„è¨­è¨ˆæ‡‰è©²è€ƒé‡ä»€éº¼ï¼Ÿ', opts: ['1. å¤ªé™½æ¯å¤©éƒ½å¾æ±æ–¹å‡ºä¾†ï¼Œæ‰€ä»¥é®é›¨æ£šè¦è£åœ¨æ±é‚Š', '2. å¤å¤©å¤ªé™½è§’åº¦å¤§(é«˜)ï¼Œå†¬å¤©è§’åº¦å°(ä½)ï¼Œæ‰€ä»¥å—é¢çš„é®é›¨æ£šé•·åº¦è¦é©ä¸­', '3. å¤ªé™½å†¬å¤©æœƒè·‘åˆ°åŒ—æ–¹ï¼Œæ‰€ä»¥åŒ—é‚Šçª—æˆ¶è¦é–‹å¤§ä¸€é»', '4. æˆ¿å­æ–¹å‘è·Ÿå¤ªé™½ç„¡é—œ'], ans: '2', exp: 'è‡ºç£å¤ªé™½åå—ã€‚å¤å¤©å¤ªé™½é«˜æ›ï¼Œé®é›¨æ£šå¯æ“‹å…‰ï¼›å†¬å¤©å¤ªé™½æ–œå°„è§’åº¦ä½ï¼Œé™½å…‰å¯ç©¿éé®é›¨æ£šä¸‹æ–¹ç…§å…¥å®¤å…§ã€‚'},

            // --- å…­ã€æ´»ç”¨é¡Œ (2é¡Œï¼Œæ¯é¡Œ5åˆ†ï¼Œå…±10åˆ†) ---
            {id: 49, u:3, type: 'app', text: 'ã€æƒ…å¢ƒæ¨ç†ã€‘å¦‚æœåœ¨æœˆçƒä¸Šé»ç‡ƒè Ÿç‡­ï¼ˆå‡è¨­æœ‰å¸¶æ°§æ°£ç“¶èˆ‡å¯†é–‰è‰™ï¼‰ï¼Œå› ç‚ºæœˆçƒå¼•åŠ›å°ä¸”æ²’æœ‰ç©ºæ°£å°æµï¼Œç‡­ç«çš„å½¢ç‹€æœ€å¯èƒ½è®Šæˆä»€éº¼æ¨£å­ï¼Ÿ', opts: ['1. å’Œåœ°çƒä¸€æ¨£æ˜¯é•·æ¢å½¢', '2. è®Šæˆåœ“çƒç‹€ï¼Œä¸”å®¹æ˜“ç†„æ»…', '3. ç«ç„°æœƒå‘ä¸‹ç‡ƒç‡’', '4. æœƒçˆ†ç‚¸'], ans: '2', exp: 'ç„¡é‡åŠ›/å¾®é‡åŠ›ç’°å¢ƒä¸‹ï¼Œç†±ç©ºæ°£ä¸æœƒä¸Šå‡ï¼Œç„¡æ³•å½¢æˆå°æµï¼Œç«ç„°å‘ˆåœ“çƒç‹€ï¼Œä¸”å› å»¢æ°£åŒ…åœå®¹æ˜“ç¼ºæ°§ç†„æ»…ã€‚'},
            {id: 50, u:4, type: 'app', text: 'ã€ç¶œåˆåˆ¤æ–·ã€‘å°æ˜åœ¨æŸæ—¥æ™šä¸Šè§€æ˜Ÿï¼Œè¨˜éŒ„ä¸‹ï¼šã€ŒåŒ—æ–—ä¸ƒæ˜Ÿçš„æ–—æŸ„æŒ‡å‘æ±æ–¹ã€ã€‚æ ¹æ“šå¤äººçš„å£è¨£ã€Œæ–—æŸ„æ±æŒ‡ï¼Œå¤©ä¸‹çš†ï¼Ÿã€è«‹å•ç¾åœ¨æ˜¯ä»€éº¼å­£ç¯€ï¼Ÿ', opts: ['1. æ˜¥', '2. å¤', '3. ç§‹', '4. å†¬'], ans: '1', exp: 'å£è¨£ï¼šæ–—æŸ„æ±æŒ‡å¤©ä¸‹çš†æ˜¥ï¼Œå—æŒ‡å¤ï¼Œè¥¿æŒ‡ç§‹ï¼ŒåŒ—æŒ‡å†¬ã€‚'}
        ];

        // --- ç¨‹å¼é‚è¼¯å€ ---
        
        // åˆ†æ•¸é…ç½®
        const scores = { tf: 1, mc: 2, check: 5, match: 2.5, lit: 5, app: 5 };

        // æ¸²æŸ“é¡Œç›®
        function renderQuestions() {
            const container = document.getElementById('questions-container');
            const sections = [
                { title: 'ä¸€ã€æ˜¯éé¡Œ (å…±20é¡Œï¼Œæ¯é¡Œ1åˆ†)', start: 1, end: 20 },
                { title: 'äºŒã€é¸æ“‡é¡Œ (å…±20é¡Œï¼Œæ¯é¡Œ2åˆ†)', start: 21, end: 40 },
                { title: 'ä¸‰ã€å‹¾é¸é¡Œ (å…±2é¡Œï¼Œæ¯é¡Œ5åˆ†)', start: 41, end: 42 },
                { title: 'å››ã€é…åˆé¡Œ (å…±4é¡Œï¼Œæ¯é¡Œ2.5åˆ†)', start: 43, end: 46 },
                { title: 'äº”ã€ç´ é¤Šé¡Œ (å…±2é¡Œï¼Œæ¯é¡Œ5åˆ†)', start: 47, end: 48 },
                { title: 'å…­ã€æ´»ç”¨é¡Œ (å…±2é¡Œï¼Œæ¯é¡Œ5åˆ†)', start: 49, end: 50 }
            ];

            sections.forEach(sec => {
                const header = document.createElement('div');
                header.className = 'section-header';
                header.innerText = sec.title;
                container.appendChild(header);

                for(let i = sec.start; i <= sec.end; i++) {
                    const q = questions.find(item => item.id === i);
                    if(!q) continue;

                    const tagClass = q.u === 3 ? 'tag-u3' : 'tag-u4';
                    const tagName = q.u === 3 ? 'å–®å…ƒ3' : 'å–®å…ƒ4';
                    
                    let html = `<div class="question-block" id="q${i}">
                        <span class="tag ${tagClass}">${tagName}</span>
                        <span class="question-text">${i}. ${q.text}</span>
                        <div class="options">`;
                    
                    if(q.type === 'tf') {
                        html += `<label><input type="radio" name="q${i}" value="O"> O (æ­£ç¢º)</label>
                                 <label><input type="radio" name="q${i}" value="X"> X (éŒ¯èª¤)</label>`;
                    } else if(['mc', 'app', 'lit', 'match'].includes(q.type)) {
                        q.opts.forEach((opt, idx) => {
                            let val = q.type === 'match' ? (idx+1) : (idx+1).toString();
                            html += `<label><input type="radio" name="q${i}" value="${val}"> ${opt}</label>`;
                        });
                    } else if(q.type === 'check') {
                        q.opts.forEach((opt, idx) => {
                            html += `<label><input type="checkbox" name="q${i}" value="${idx+1}"> ${opt}</label>`;
                        });
                    }

                    html += `</div>
                        <label class="flag-review"><input type="checkbox" onchange="toggleMark('q${i}')"> ç¨å¾Œä½œç­”</label>
                        <span class="correct-answer" id="ans${i}"></span>
                        <div class="explanation" id="exp${i}"></div>
                    </div>`;
                    
                    const div = document.createElement('div');
                    div.innerHTML = html;
                    container.appendChild(div.firstElementChild);
                }
            });
        }
        renderQuestions();

        // å€’æ•¸è¨ˆæ™‚å™¨
        let timeLeft = 900; // 15åˆ†é˜
        const timerDisplay = document.getElementById('timerDisplay');
        let timerId;
        let isSubmitted = false;

        function startTimer() {
            timerId = setInterval(() => {
                if(isSubmitted) return;
                timeLeft--;
                let m = Math.floor(timeLeft / 60);
                let s = timeLeft % 60;
                timerDisplay.innerText = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;

                if (timeLeft <= 60) {
                    timerDisplay.classList.add('timer-warning');
                    if (timeLeft === 60) alert("âš ï¸ æ³¨æ„ï¼šè€ƒè©¦æ™‚é–“åªå‰© 1 åˆ†é˜ï¼");
                }

                if (timeLeft <= 0) {
                    clearInterval(timerId);
                    alert("â° æ™‚é–“åˆ°ï¼ç³»çµ±å°‡è‡ªå‹•å¼·åˆ¶äº¤å·ã€‚");
                    submitExam(true);
                }
            }, 1000);
        }
        window.onload = startTimer;

        // æ¨™è¨˜åŠŸèƒ½
        function toggleMark(id) {
            document.getElementById(id).classList.toggle('marked');
        }

        // äº¤å·èˆ‡è¨ˆåˆ†
        function submitExam(force = false) {
            if(isSubmitted) return;
            
            // æª¢æŸ¥æœªä½œç­”
            let answeredCount = 0;
            questions.forEach(q => {
                const inputs = document.getElementsByName('q' + q.id);
                for(let inp of inputs) if(inp.checked) { answeredCount++; break; }
            });

            if(!force && answeredCount < questions.length) {
                if(!confirm(`æ‚¨é‚„æœ‰ ${questions.length - answeredCount} é¡Œæœªä½œç­”ï¼Œç¢ºå®šè¦äº¤å·å—ï¼Ÿ`)) return;
            }

            isSubmitted = true;
            clearInterval(timerId);
            
            let totalScore = 0;
            
            questions.forEach(q => {
                let userAns = [];
                const inputs = document.getElementsByName('q' + q.id);
                inputs.forEach(inp => {
                    if(inp.checked) userAns.push(inp.value);
                    inp.disabled = true; 
                });

                let correct = false;
                if(q.type === 'check') {
                    if(userAns.length === q.ans.length && userAns.every(v => q.ans.includes(v))) correct = true;
                } else {
                    if(userAns[0] == q.ans) correct = true;
                }

                if(correct) {
                    totalScore += scores[q.type];
                    document.getElementById('q'+q.id).style.border = "2px solid #44bd32";
                    document.getElementById('q'+q.id).style.backgroundColor = "#f0fff4";
                } else {
                    document.getElementById('q'+q.id).style.border = "2px solid #e74c3c";
                    document.getElementById('q'+q.id).style.backgroundColor = "#fdedec";
                    
                    let ansText = "";
                    if(q.type === 'check') ansText = q.ans.join(', ');
                    else if(q.type === 'match') {
                        const map = ['A','B','C','D'];
                        ansText = map[parseInt(q.ans)-1] || q.ans;
                    } 
                    else ansText = q.ans;

                    const ansSpan = document.getElementById('ans'+q.id);
                    ansSpan.innerText = ` (æ­£ç¢ºç­”æ¡ˆ: ${ansText})`;
                    
                    const expDiv = document.getElementById('exp'+q.id);
                    expDiv.innerText = `è©³è§£ï¼š${q.exp}`;
                }
            });

            const resultArea = document.getElementById('resultArea');
            resultArea.innerText = `æ¸¬é©—çµæŸï¼æ‚¨çš„ç¸½åˆ†ï¼š${totalScore} åˆ†`;
            resultArea.style.display = 'block';
            document.querySelector('.btn-submit').style.display = 'none';
            window.scrollTo(0,0);
        }

        // å¯†ç¢¼è©³è§£
        function openModal() {
            if(!isSubmitted) { alert("è«‹å…ˆäº¤å·å¾Œå†çœ‹è©³è§£ï¼"); return; }
            document.getElementById('pwdModal').style.display = 'block';
            document.getElementById('pwdInput').focus();
        }

        function checkPwd() {
            if(document.getElementById('pwdInput').value === '0106') {
                document.getElementById('pwdModal').style.display = 'none';
                document.querySelectorAll('.correct-answer').forEach(e => e.style.display = 'inline');
                document.querySelectorAll('.explanation').forEach(e => e.style.display = 'block');
            } else {
                alert("å¯†ç¢¼éŒ¯èª¤ï¼");
            }
        }
    </script>
</body>

</html>

